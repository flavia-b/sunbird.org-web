version: 2
jobs:
  build:
    docker:
      - image: lakhanmandloi/sunbird-ubuntu-fuller
    steps:
      - checkout

      # Add SSH Key   
      - add_ssh_keys:
          fingerprints:
            - $GITHUB_SSH

      - type: shell
        command: |
          # Need to add this into circleci global variables
          git config --global user.email $GITHUB_EMAIL
          git config --global user.name "Ranjit Redekar"

      - type: shell
        command: |
          # mkdir ../$CIRCLE_BRANCH
          # jekyll build --destination ../$CIRCLE_BRANCH
          jekyll build
          pwd

      # Deploy to Github pages
      - type: shell
        command: |
          pwd
          cd _site
          ls

workflows:
  version: 2
  build_and_test:
    jobs:
      - build
